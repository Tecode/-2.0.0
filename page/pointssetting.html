<link rel="stylesheet" href="js/bower_components/cropbox/javascript/example/style.css">
<div class="page-header">
    <h1 class="title">会员卡管理</h1>
    <ol class="breadcrumb">
        <li><a href="javascript:;">会员卡管理</a></li>
        <li class="active">积分设置</li>
    </ol>
    <div class="right">
        <div class="btn-group" role="group" aria-label="...">
            <a href="javascript:;" class="btn btn-light"><i class="fa fa-refresh"></i></a>
        </div>
    </div>
</div>

<div class="row pointseting">
    <div class="col-md-12 col-lg-12 padding-0">
        <div class="panel panel-transparent">
            <div class="panel-title">积分会员卡设置</div>
            <div class="panel-body">
                <div role="tabpanel">
                    <ul class="nav nav-tabs tabcolor5-bg" role="tablist">
                        <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab" aria-expanded="true" class="">积分配置</a></li>
                        <li role="presentation" class=""><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab" class="" aria-expanded="false">会员等级积分配置</a></li>
                        <li role="presentation" class=""><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab" class="active" aria-expanded="false">会员卡基础配置</a></li>
                    </ul>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active row ms-controller" id="home" ms-controller="integral">
                            <div class="col-md-6">
                                <div class="panel panel-default">
                                    <div class="panel-title">
                                        会员卡使用说明
                                    </div>
                                    <div class="panel-body">
                                        <form class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label form-label">说明</label>
                                                <div class="col-sm-10">
                                                    <textarea placeholder="会员卡使用说明" ms-duplex="##integralData.instructions" class="form-control" rows="3"></textarea>
                                                </div>
                                            </div>
                                        </form>
                                    </div>

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="panel panel-default">
                                    <div class="panel-title">
                                        积分规则说明
                                    </div>
                                    <div class="panel-body">
                                        <form class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label form-label">说明</label>
                                                <div class="col-sm-10">
                                                    <textarea placeholder="积分规则说明" ms-duplex="##integralData.ruleDescription" class="form-control" rows="3"></textarea>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="panel panel-default table-responsive">
                                    <div class="panel-title">
                                        积分设置
                                    </div>
                                    <div class="panel-body">
                                        <table class="table table-bordered table-striped">
                                            <thead>
                                            <tr>
                                                <th>序号</th>
                                                <th>策略名称</th>
                                                <th>积分奖励</th>
                                            </tr>
                                            </thead>
                                            <tbody ms-for="(index,el) in ##strategyList | limitBy(1)">
                                            <tr>
                                                <th scope="row">
                                                    1
                                                </th>
                                                <td>充值<input style="width: 4em; margin: 0 .5em;background-color: #f9f9f9" class="form-control-line text-center" ms-duplex="el.monetary" placeholder="" />元奖励</td>
                                                <td>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">奖励</div>
                                                        <input type="text" class="form-control" id="exampleInputAmount" ms-duplex="el.bonusPoints" placeholder="积分奖励">
                                                        <div class="input-group-addon">分</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th scope="row">
                                                    2
                                                </th>
                                                <td>每日签到奖励</td>
                                                <td>
                                                    <div class="input-group">
                                                    <div class="input-group-addon">奖励</div>
                                                    <input type="text" class="form-control" ms-duplex="el.checkinteg" id="exampleInputAmount10" placeholder="积分奖励">
                                                    <div class="input-group-addon">分</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th scope="row">
                                                    3
                                                </th>
                                                <td>每日分享奖励</td>
                                                <td>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">奖励</div>
                                                        <input type="text" class="form-control" ms-duplex="el.shareinteg" id="exampleInput" placeholder="积分奖励">
                                                        <div class="input-group-addon">分</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <button type="button" class="btn btn-default" ms-click="##saveintegral">提交保存</button>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane ms-controller" id="profile" ms-controller="cardLevel">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="panel panel-default table-responsive">

                                        <div class="panel-title">
                                            会员等级折扣设置
                                        </div>

                                        <div class="panel-body" ms-if="##levelListData.length>0">
                                            <table class="table table-bordered table-striped">
                                                <thead>
                                                <tr>
                                                    <th>序号</th>
                                                    <th>会员等级</th>
                                                    <th>积分设置</th>
                                                    <th>消费折扣率</th>
                                                    <th>操作</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ms-for="(index,elme) in ##levelListData">
                                                    <th scope="row">
                                                        {{index+1}}
                                                    </th>
                                                    <td width="15%">
                                                        <input type="text" placeholder="等级名称" ms-duplex="elme.vipGrade" class="form-control" id="input2">
                                                    </td>
                                                    <td width="50%">
                                                        <div class="input-group col-xs-5 pull-left">
                                                            <div class="input-group-addon"><span class="fa fa-tags"></span></div>
                                                            <input type="text" class="form-control" ms-duplex="elme.pontsstart" id="exampleInputAmoun" placeholder="积分奖励">
                                                            <div class="input-group-addon">分</div>
                                                        </div>
                                                        <div class="col-xs-2 text-center" style="margin-top: .3em">--</div>
                                                        <div class="input-group col-xs-5 pull-right">
                                                            <div class="input-group-addon"><span class="fa fa-tags"></span></div>
                                                            <input type="text" class="form-control" id="exampled" ms-duplex="elme.pontsend" placeholder="积分奖励">
                                                            <div class="input-group-addon">分</div>
                                                        </div>
                                                    </td>
                                                    <td width="20%">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control" ms-duplex="elme.discount" id="example" placeholder="折扣率">
                                                            <div class="input-group-addon">折</div>
                                                        </div>
                                                    </td>
                                                    <td><a href="javascript:void(0);" ms-click="##deleteLevel(elme)">删除</a></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div>
                                            <button type="button" class="btn btn-light" style="margin-top: 1em" ms-click="##addLevel">新增等级设置</button>
                                            <p class="color-down" style="font-size: 12px;margin-top: .5em;text-indent: .1em">已经设置{{##levelListData.length}}个等级，还可以增加{{10-##levelListData.length}}个。</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <button type="submit" class="btn btn-default" ms-click="##saveLevel">提交保存</button>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="messages" ms-controller="cardConfigure">
                            <div class="row">
                                <div class="col-md-12 col-lg-7">
                                    <div class="panel panel-default">

                                        <div class="panel-title">
                                            商城支付配置编辑
                                            <ul class="panel-tools">
                                                <li><a class="icon expand-tool"><i class="fa fa-expand"></i></a></li>
                                            </ul>
                                        </div>

                                        <div class="panel-body">
                                            <form class="form-horizontal" ms-validate="##validate" action="#/pointssetting">
                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label form-label">标题</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" ms-focus="##clearAttr" placeholder="会员卡的标题" ms-duplex="##configureinfo.bgtital" ms-rules="{required:true}" data-required-message="会员卡名称必须填写！" id="input11">
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label form-label">商家联系电话</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" placeholder="手机号码或电话号码" ms-focus="clearAttr" ms-duplex="##configureinfo.sellphone" ms-rules="{required:true}" data-required-message="请填写正确的号码！" class="form-control">
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label form-label">商家联系地址</label>
                                                    <div class="col-sm-9">
                                                        <textarea ms-rules="{required:true}" ms-focus="clearAttr" placeholder="留个地址呗，方便找到你。" ms-duplex="##configureinfo.selladdress" data-required-message="联系地址需要填写！" class="form-control" rows="3"></textarea>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label form-label">支付配置</label>
                                                    <div class="col-sm-9">
                                                        <select class="selectpicker">
                                                            <option value="10">打包价</option>
                                                            <option value="120">我的天</option>
                                                            <option value="60">哈哈哈</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label form-label">商家LOGO</label>
                                                    <div class="col-sm-9">
                                                        <div style="width: 108px;height: 108px;border: 1px solid #f1f1f1;border-radius: 3px;margin-bottom: 15px;">
                                                            <img width="100%" src="img/cobe_img.jpg" ms-attr="{src:##configureinfo.bglogo}" alt="商家logo">
                                                        </div>
                                                        <button type="button" class="btn btn-sm btn-light" ms-click="##uploadimg">上传LOGO</button>
                                                        <input type="file" id="file" style="display: none">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label form-label">商城网址</label>
                                                    <div class="col-sm-9">
                                                        <textarea class="form-control" ms-rules="{required:true}" ms-duplex="##configureinfo.stroeurl" data-required-message="商城网址需要填写！" placeholder="输入商城的网址" rows="3" id="contentStroe"></textarea>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label form-label">会员卡网址</label>
                                                    <div class="col-sm-9">
                                                        <textarea class="form-control" ms-rules="{required:true}" ms-duplex="##configureinfo.configurl" data-required-message="会员卡网址需要填写！" placeholder="输入会员卡的网址" rows="3" id="contentCard"></textarea>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-sm-offset-3 col-sm-9">
                                                        <button type="submit" class="btn btn-default">保存</button>
                                                    </div>
                                                </div>
                                            </form>

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>


                        <!--弹出裁剪框-->
                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                        <h4 class="modal-title">裁切图像</h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="cropbox">
                                            <div class="imageBox">
                                                <div class="thumbBox"></div>
                                                <div class="spinner" style="display: none">Loading...</div>
                                            </div>
                                            <div class="action">
                                                <input type="button" id="btnCrop" value="裁剪" class="btn btn-default btn-block" style="margin: 0 auto;margin-top: 20px;width: 78%;">
                                            </div>
                                        </div>
                                        <div class="cropimg" style="display: none">
                                            <button type="button" id="saveimg"  class="btn btn-default btn-block" style="margin: 0 auto;margin-top: 10px;width: 78%;">提交并保存</button>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="loader" style="display: none"></div>
                        <button style="display: none" id="modalicon" data-toggle="modal" data-target="#myModal"></button>

                    </div>

                </div>

            </div>

        </div>
    </div>
</div>
<script>
    require(['pointssetting'],function (pointssetting) {
        var url = {
            getIntegralUrl:'json/integral.json',//获取积分
            getCardLevelUrl:'json/positionList.json',//获取会员卡等级
            getConfigureUrl:'json/configure.json',//获取配置
            saveImageUrl:'json/configure.json'//保存图片
        };
        pointssetting.init_start(url);
    })
</script>